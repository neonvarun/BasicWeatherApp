<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>WeatherPro - Advanced Weather Forecast & Air Quality</title>
    <meta name="description" content="Get accurate real-time weather updates, 5-day forecasts, air quality index, and hourly predictions for any city worldwide.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Compact Single Page Layout -->
    <div class="main-wrapper">
        <!-- Header -->
        <header class="compact-header">
            <div class="header-content">
                <div class="brand">
                    <span class="logo-icon">‚õÖ</span>
                    <span class="brand-name">Weather<span class="highlight">Pro</span></span>
                </div>
                <div class="header-actions">
                    <button class="dark-mode-toggle" title="Toggle dark mode" aria-label="Toggle dark mode">üåô</button>
                    <button class="refresh-btn" title="Refresh data" aria-label="Refresh weather data">üîÑ</button>
                    <p class="tagline">Advanced weather intelligence</p>
                </div>
            </div>
        </header>

        <!-- Main Content Grid -->
        <div class="content-grid">
            
            <!-- Weather Card - Main Focus -->
            <div class="weather-card">
                <div class="card-header">
                    <h2>Current Weather</h2>
                    <button class="temp-toggle" title="Toggle ¬∞C/¬∞F" aria-label="Toggle temperature unit">
                        <span class="toggle-indicator">¬∞C</span>
                    </button>
                </div>

                <div class="search-bar">
                    <input type="text" placeholder="Search city..." spellcheck="false" class="search-input">
                    <button class="search-btn" title="Search"><img src="images/search.png" alt="Search"></button>
                    <button class="location-btn" title="Current location">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                            <circle cx="12" cy="10" r="3"></circle>
                        </svg>
                    </button>
                </div>

                <div class="error-message">
                    <p>‚ö†Ô∏è Invalid city name</p>
                </div>

                <!-- Weather Alert Banner -->
                <div class="weather-alert" style="display: none;">
                    <span class="alert-icon">‚ö†Ô∏è</span>
                    <span class="alert-text">Extreme weather conditions detected</span>
                </div>

                <div class="weather-info">
                    <div class="weather-display">
                        <img src="images/rain.png" class="weather-icon" alt="Weather">
                        <div class="temp-info">
                            <h1 class="temp">22¬∞C</h1>
                            <h3 class="city">London, GB</h3>
                            <p class="description">Clouds</p>
                            <p class="last-update">Updated: <span class="update-time">Just now</span></p>
                        </div>
                    </div>

                    <!-- Air Quality Index -->
                    <div class="aqi-section">
                        <div class="aqi-header">
                            <span class="aqi-label">üå¨Ô∏è Air Quality</span>
                            <span class="aqi-badge good">Good</span>
                        </div>
                        <div class="aqi-bar">
                            <div class="aqi-fill" style="width: 30%"></div>
                        </div>
                        <div class="aqi-details">
                            <p class="aqi-value">AQI: <strong class="aqi-number">45</strong></p>
                            <p class="aqi-message">Air quality is satisfactory</p>
                        </div>
                    </div>

                    <div class="weather-stats">
                        <div class="stat-box">
                            <div class="stat-icon">üíß</div>
                            <div class="stat-data">
                                <span class="stat-value humidity">72%</span>
                                <span class="stat-label">Humidity</span>
                            </div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-icon">üí®</div>
                            <div class="stat-data">
                                <span class="stat-value wind">4 km/h</span>
                                <span class="stat-label">Wind Speed</span>
                            </div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-icon">üå°Ô∏è</div>
                            <div class="stat-data">
                                <span class="stat-value feels-like">20¬∞C</span>
                                <span class="stat-label">Feels Like</span>
                            </div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-icon">üß≠</div>
                            <div class="stat-data">
                                <span class="stat-value pressure">1007 mb</span>
                                <span class="stat-label">Pressure</span>
                            </div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-icon">‚òÅÔ∏è</div>
                            <div class="stat-data">
                                <span class="stat-value cloudiness">50%</span>
                                <span class="stat-label">Cloudiness</span>
                            </div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-icon">üíß</div>
                            <div class="stat-data">
                                <span class="stat-value dew-point">15¬∞C</span>
                                <span class="stat-label">Dew Point</span>
                            </div>
                        </div>
                    </div>

                    <!-- Hourly Forecast -->
                    <div class="hourly-forecast-section">
                        <h3>Hourly Forecast</h3>
                        <div class="hourly-scroll" id="hourly-container">
                            <!-- Hourly cards will be inserted here -->
                        </div>
                    </div>

                    <!-- 5-Day Forecast -->
                    <div class="forecast-section">
                        <h3>5-Day Forecast</h3>
                        <div class="forecast-grid" id="forecast-container">
                            <!-- Forecast cards will be inserted here -->
                        </div>
                    </div>

                    <div class="extra-info">
                        <div class="info-item">
                            <span>üåÖ Sunrise</span>
                            <span class="sunrise">6:30 AM</span>
                        </div>
                        <div class="info-item">
                            <span>üåá Sunset</span>
                            <span class="sunset">6:30 PM</span>
                        </div>
                        <div class="info-item">
                            <span>üëÅÔ∏è Visibility</span>
                            <span class="visibility">10 km</span>
                        </div>
                        <div class="info-item">
                            <span>üå°Ô∏è UV Index</span>
                            <span class="uv-index">3 (Moderate)</span>
                        </div>
                    </div>

                    <div class="search-history-section">
                        <div class="history-header">
                            <p class="history-title">Recent Searches</p>
                            <button class="clear-history" title="Clear history" aria-label="Clear search history">üóëÔ∏è</button>
                        </div>
                        <div class="search-history"></div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Features Sidebar -->
            <div class="features-sidebar">
                <div class="feature-item">
                    <div class="feature-icon">üåç</div>
                    <div class="feature-content">
                        <h4>Global Coverage</h4>
                        <p>200,000+ cities worldwide</p>
                    </div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">üìä</div>
                    <div class="feature-content">
                        <h4>5-Day Forecast</h4>
                        <p>Extended predictions</p>
                    </div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">üå¨Ô∏è</div>
                    <div class="feature-content">
                        <h4>Air Quality</h4>
                        <p>Real-time AQI monitoring</p>
                    </div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">‚è∞</div>
                    <div class="feature-content">
                        <h4>Hourly Updates</h4>
                        <p>24-hour breakdown</p>
                    </div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">üåô</div>
                    <div class="feature-content">
                        <h4>Dark Mode</h4>
                        <p>Eye-friendly interface</p>
                    </div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">‚ö†Ô∏è</div>
                    <div class="feature-content">
                        <h4>Weather Alerts</h4>
                        <p>Extreme conditions</p>
                    </div>
                </div>
            </div>

        </div>

        <!-- Compact Footer -->
        <footer class="compact-footer">
            <p>¬© 2025 WeatherPro ‚Ä¢ Powered by OpenWeatherMap API ‚Ä¢ Data updates every 10 minutes</p>
        </footer>
    </div>
    <script>
        const apiKey = "ce0fa35846c5a6e6791439dda93a5675";
        const apiUrl = "https://api.openweathermap.org/data/2.5/weather?units=metric&q=";
        const forecastUrl = "https://api.openweathermap.org/data/2.5/forecast?units=metric&q=";
        const airQualityUrl = "https://api.openweathermap.org/data/2.5/air_pollution?";

        const searchBox = document.querySelector(".search-input");
        const searchBtn = document.querySelector(".search-btn");
        const locationBtn = document.querySelector(".location-btn");
        const tempToggleBtn = document.querySelector(".temp-toggle");
        const darkModeBtn = document.querySelector(".dark-mode-toggle");
        const refreshBtn = document.querySelector(".refresh-btn");
        const clearHistoryBtn = document.querySelector(".clear-history");
        const weatherIcon = document.querySelector(".weather-icon");
        const errorMessage = document.querySelector(".error-message");
        const weatherInfo = document.querySelector(".weather-info");
        const searchHistory = document.querySelector(".search-history");
        const weatherAlert = document.querySelector(".weather-alert");

        let isCelsius = true;
        let currentWeatherData = null;
        let currentCity = "London";

        // Dark mode toggle
        darkModeBtn.addEventListener("click", () => {
            document.body.classList.toggle("dark-mode");
            const isDark = document.body.classList.contains("dark-mode");
            darkModeBtn.textContent = isDark ? "‚òÄÔ∏è" : "üåô";
            localStorage.setItem("darkMode", isDark);
        });

        // Load dark mode preference
        if (localStorage.getItem("darkMode") === "true") {
            document.body.classList.add("dark-mode");
            darkModeBtn.textContent = "‚òÄÔ∏è";
        }

        // Refresh button
        refreshBtn.addEventListener("click", () => {
            refreshBtn.style.animation = "spin 0.5s ease-in-out";
            setTimeout(() => refreshBtn.style.animation = "", 500);
            if (currentCity) checkWeather(currentCity);
        });

        // Clear history
        clearHistoryBtn.addEventListener("click", () => {
            if (confirm("Clear all search history?")) {
                localStorage.removeItem("weatherSearches");
                displaySearchHistory();
            }
        });

        // Temperature conversion
        function convertTemp(celsius) {
            return isCelsius ? celsius : Math.round((celsius * 9/5) + 32);
        }

        function getUnitSymbol() {
            return isCelsius ? "¬∞C" : "¬∞F";
        }

        // Temperature toggle
        tempToggleBtn.addEventListener("click", () => {
            isCelsius = !isCelsius;
            tempToggleBtn.querySelector(".toggle-indicator").textContent = getUnitSymbol();
            if (currentWeatherData) {
                updateWeatherDisplay();
            }
        });

        // Get current location
        locationBtn.addEventListener("click", () => {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const lat = position.coords.latitude;
                        const lon = position.coords.longitude;
                        fetchWeatherByCoords(lat, lon);
                    },
                    (error) => {
                        errorMessage.innerHTML = "<p>‚ö†Ô∏è Unable to get your location</p>";
                        errorMessage.style.display = "block";
                        setTimeout(() => errorMessage.style.display = "none", 3000);
                        console.error(error);
                    }
                );
            }
        });

        async function fetchWeatherByCoords(lat, lon) {
            try {
                const response = await fetch(
                    `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=metric&appid=${apiKey}`
                );
                if (response.ok) {
                    currentWeatherData = await response.json();
                    currentCity = currentWeatherData.name;
                    updateWeatherDisplay();
                    fetchForecast(currentCity);
                    fetchAirQuality(lat, lon);
                    saveSearch(currentWeatherData.name);
                }
            } catch (error) {
                console.error("Error fetching weather by coordinates:", error);
            }
        }

        async function checkWeather(city) {
            try {
                const response = await fetch(apiUrl + city + `&appid=${apiKey}`);

                if (response.status === 404) {
                    errorMessage.style.display = "block";
                    weatherInfo.style.display = "none";
                    setTimeout(() => errorMessage.style.display = "none", 3000);
                } else if (response.ok) {
                    currentWeatherData = await response.json();
                    currentCity = city;
                    updateWeatherDisplay();
                    fetchForecast(city);
                    fetchAirQuality(currentWeatherData.coord.lat, currentWeatherData.coord.lon);
                    saveSearch(city);
                }
            } catch (error) {
                console.error("Error fetching weather:", error);
                errorMessage.style.display = "block";
                weatherInfo.style.display = "none";
                setTimeout(() => errorMessage.style.display = "none", 3000);
            }
        }

        // Fetch 5-day forecast
        async function fetchForecast(city) {
            try {
                const response = await fetch(forecastUrl + city + `&appid=${apiKey}`);
                if (response.ok) {
                    const data = await response.json();
                    displayForecast(data);
                    displayHourlyForecast(data);
                }
            } catch (error) {
                console.error("Error fetching forecast:", error);
            }
        }

        // Display 5-day forecast
        function displayForecast(data) {
            const forecastContainer = document.getElementById("forecast-container");
            forecastContainer.innerHTML = "";
            
            const dailyData = {};
            data.list.forEach(item => {
                const date = new Date(item.dt * 1000).toLocaleDateString();
                if (!dailyData[date]) {
                    dailyData[date] = {
                        temp: item.main.temp,
                        maxTemp: item.main.temp_max,
                        minTemp: item.main.temp_min,
                        weather: item.weather[0],
                        icon: item.weather[0].icon
                    };
                } else {
                    dailyData[date].maxTemp = Math.max(dailyData[date].maxTemp, item.main.temp_max);
                    dailyData[date].minTemp = Math.min(dailyData[date].minTemp, item.main.temp_min);
                }
            });

            const days = Object.keys(dailyData).slice(0, 5);
            days.forEach((date, index) => {
                const day = dailyData[date];
                const dayName = index === 0 ? "Today" : new Date(date).toLocaleDateString('en-US', { weekday: 'short' });
                
                const card = document.createElement("div");
                card.className = "forecast-card";
                card.innerHTML = `
                    <p class="forecast-day">${dayName}</p>
                    <img src="https://openweathermap.org/img/wn/${day.icon}@2x.png" alt="${day.weather.main}" class="forecast-icon">
                    <p class="forecast-temp">${convertTemp(day.maxTemp)}¬∞</p>
                    <p class="forecast-temp-min">${convertTemp(day.minTemp)}¬∞</p>
                    <p class="forecast-desc">${day.weather.main}</p>
                `;
                forecastContainer.appendChild(card);
            });
        }

        // Display hourly forecast
        function displayHourlyForecast(data) {
            const hourlyContainer = document.getElementById("hourly-container");
            hourlyContainer.innerHTML = "";
            
            const hourlyData = data.list.slice(0, 8);
            hourlyData.forEach(item => {
                const time = new Date(item.dt * 1000).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
                
                const card = document.createElement("div");
                card.className = "hourly-card";
                card.innerHTML = `
                    <p class="hourly-time">${time}</p>
                    <img src="https://openweathermap.org/img/wn/${item.weather[0].icon}.png" alt="${item.weather[0].main}" class="hourly-icon">
                    <p class="hourly-temp">${convertTemp(item.main.temp)}¬∞</p>
                    <p class="hourly-rain">${item.pop ? Math.round(item.pop * 100) + '%' : '0%'}</p>
                `;
                hourlyContainer.appendChild(card);
            });
        }

        // Fetch air quality
        async function fetchAirQuality(lat, lon) {
            try {
                const response = await fetch(`${airQualityUrl}lat=${lat}&lon=${lon}&appid=${apiKey}`);
                if (response.ok) {
                    const data = await response.json();
                    displayAirQuality(data);
                }
            } catch (error) {
                console.error("Error fetching air quality:", error);
            }
        }

        // Display air quality
        function displayAirQuality(data) {
            const aqi = data.list[0].main.aqi;
            const aqiLevels = ["Good", "Fair", "Moderate", "Poor", "Very Poor"];
            const aqiClasses = ["good", "fair", "moderate", "poor", "very-poor"];
            const aqiColors = ["#50f053", "#f0e641", "#ff9933", "#ff5050", "#990033"];
            
            const aqiBadge = document.querySelector(".aqi-badge");
            const aqiFill = document.querySelector(".aqi-fill");
            const aqiNumber = document.querySelector(".aqi-number");
            const aqiMessage = document.querySelector(".aqi-message");
            
            aqiBadge.textContent = aqiLevels[aqi - 1];
            aqiBadge.className = "aqi-badge " + aqiClasses[aqi - 1];
            aqiFill.style.width = (aqi * 20) + "%";
            aqiFill.style.backgroundColor = aqiColors[aqi - 1];
            aqiNumber.textContent = data.list[0].main.aqi * 25;
            
            const messages = [
                "Air quality is satisfactory",
                "Air quality is acceptable",
                "Sensitive groups may be affected",
                "Health effects for everyone",
                "Health alert: everyone affected"
            ];
            aqiMessage.textContent = messages[aqi - 1];
        }

        function updateWeatherDisplay() {
            const data = currentWeatherData;

            document.querySelector(".city").innerHTML = data.name + ", " + data.sys.country;
            document.querySelector(".temp").innerHTML = convertTemp(data.main.temp) + getUnitSymbol();
            document.querySelector(".feels-like").innerHTML = convertTemp(data.main.feels_like) + getUnitSymbol();
            document.querySelector(".humidity").innerHTML = data.main.humidity + "%";
            document.querySelector(".wind").innerHTML = Math.round(data.wind.speed) + " km/h";
            document.querySelector(".pressure").innerHTML = data.main.pressure + " mb";
            document.querySelector(".description").innerHTML = data.weather[0].main;
            document.querySelector(".visibility").innerHTML = (data.visibility / 1000).toFixed(1) + " km";
            
            // Cloudiness
            if (data.clouds && document.querySelector(".cloudiness")) {
                document.querySelector(".cloudiness").innerHTML = data.clouds.all + "%";
            }
            
            // Dew point calculation
            const temp = data.main.temp;
            const humidity = data.main.humidity;
            const dewPoint = temp - ((100 - humidity) / 5);
            if (document.querySelector(".dew-point")) {
                document.querySelector(".dew-point").innerHTML = convertTemp(dewPoint) + getUnitSymbol();
            }

            // Update time
            const now = new Date();
            document.querySelector(".update-time").innerHTML = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });

            // Sunrise and Sunset
            const sunrise = new Date(data.sys.sunrise * 1000);
            const sunset = new Date(data.sys.sunset * 1000);
            document.querySelector(".sunrise").innerHTML = sunrise.toLocaleTimeString('en-US', {hour: '2-digit', minute:'2-digit'});
            document.querySelector(".sunset").innerHTML = sunset.toLocaleTimeString('en-US', {hour: '2-digit', minute:'2-digit'});

            // UV Index (mock data - requires separate API call)
            const uvIndex = Math.floor(Math.random() * 8) + 1;
            const uvLevels = ["Low", "Low", "Low", "Moderate", "Moderate", "High", "High", "Very High", "Very High"];
            document.querySelector(".uv-index").innerHTML = `${uvIndex} (${uvLevels[uvIndex - 1]})`;

            // Weather alert for extreme conditions
            if (data.main.temp > 35 || data.main.temp < -10 || data.wind.speed > 50) {
                weatherAlert.style.display = "flex";
                if (data.main.temp > 35) weatherAlert.querySelector(".alert-text").textContent = "‚ö†Ô∏è Extreme heat warning";
                else if (data.main.temp < -10) weatherAlert.querySelector(".alert-text").textContent = "‚ö†Ô∏è Extreme cold warning";
                else if (data.wind.speed > 50) weatherAlert.querySelector(".alert-text").textContent = "‚ö†Ô∏è High wind warning";
            } else {
                weatherAlert.style.display = "none";
            }

            // Weather icon
            const weatherMain = data.weather[0].main;
            let iconSrc = "images/rain.png";
            if (weatherMain === "Clouds") {
                iconSrc = "images/clouds.png";
            } else if (weatherMain === "Clear") {
                iconSrc = "images/clear.png";
            } else if (weatherMain === "Rain") {
                iconSrc = "images/rain.png";
            } else if (weatherMain === "Drizzle") {
                iconSrc = "images/drizzle.png";
            } else if (weatherMain === "Mist" || weatherMain === "Fog") {
                iconSrc = "images/mist.png";
            } else if (weatherMain === "Snow") {
                iconSrc = "images/snow.png";
            }
            weatherIcon.src = iconSrc;

            weatherInfo.style.display = "block";
            errorMessage.style.display = "none";
        }

        // Search history
        function saveSearch(city) {
            let searches = JSON.parse(localStorage.getItem("weatherSearches")) || [];
            searches = searches.filter(s => s.toLowerCase() !== city.toLowerCase());
            searches.unshift(city);
            searches = searches.slice(0, 5);
            localStorage.setItem("weatherSearches", JSON.stringify(searches));
            displaySearchHistory();
        }

        function displaySearchHistory() {
            const searches = JSON.parse(localStorage.getItem("weatherSearches")) || [];
            searchHistory.innerHTML = "";
            if (searches.length === 0) {
                searchHistory.innerHTML = "<p class='no-history'>No recent searches</p>";
                return;
            }
            searches.forEach(city => {
                const tag = document.createElement("span");
                tag.className = "search-tag";
                tag.textContent = city;
                tag.addEventListener("click", () => {
                    checkWeather(city);
                    searchBox.value = city;
                });
                searchHistory.appendChild(tag);
            });
        }

        // Event listeners
        searchBtn.addEventListener("click", () => {
            if (searchBox.value.trim()) {
                checkWeather(searchBox.value);
            }
        });

        searchBox.addEventListener("keypress", (e) => {
            if (e.key === "Enter" && searchBox.value.trim()) {
                checkWeather(searchBox.value);
            }
        });

        // Auto-refresh every 10 minutes
        setInterval(() => {
            if (currentCity) {
                checkWeather(currentCity);
            }
        }, 600000);

        // Initial display
        displaySearchHistory();
        checkWeather("London");
    </script>
</body>

</html>



<!-- https://api.openweathermap.org/data/2.5/weather?q=germany&appid=ce0fa35846c5a6e6791439dda93a5675&units=metric -->